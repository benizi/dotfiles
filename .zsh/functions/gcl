# wrapper around `git-cl` to also auto-cd

local name val dest started="$(pwd)"

git cl "$@" |
while read name val
do
  [[ $name = dest ]] || continue
  dest=$val
done

if [[ -e $dest ]] && pushd $dest
then notice "==> $dest"
elif [[ "$(pwd)" = $started ]]
then warn "Didn't change directory. pwd=($started)"
else warn "Something went wrong. pwd=$(pwd)"
fi
