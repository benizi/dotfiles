setopt promptsubst
export PROMPT='%{${PSCOLOR}%(!.${PSCOLORALL-${PSCOLORROOT-$UNDERLINE}}.${PSCOLORALL-$PSCOLORNORM})%}%n@%m %~%(!.#.$)%{${NOCOLOR}%} '
export PS1
TITLESEP='│' # ceçi n'est pas un pipe
[ -n "$NO_UTF8_TITLE" ] && TITLESEP='|'
function fancytitle () {
	local c=$TITLESEP
	printf "${TITLE}%s%s${ENDTITLE}" $1 "$(print -nP '%(!.ROOT $c .)%m $c %~ $c %n${STY+ $c $STY}')"
}
function preexec () {
	if [ $SHLVL -eq 1 -a "$TERM" = "linux" ] ; then return ; fi
	[[ -z "$NOTITLE" ]] || return
	fancytitle "$1 $TITLESEP "
}
function precmd () {
	if [ $SHLVL -eq 1 -a "$TERM" = "linux" ] ; then return ; fi
	[[ -z "$NOTITLE" ]] || return
	fancytitle ""
}
