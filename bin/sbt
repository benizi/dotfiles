#!/bin/zsh
: ${sbt_version=1.0.2}
url=https://repo1.maven.org/maven2/org/scala-sbt/sbt-launch/$sbt_version/sbt-launch-$sbt_version.jar
dest_dir=$HOME/.cache/sbt-launch
dest=$dest_dir/sbt-launch-$sbt_version.jar

[[ -d $dest_dir ]] || mkdir $dest_dir
[[ -f $dest ]] || curl -Lo $dest $url
java -X{ms512,mx1536,ss1}M -XX:{+CMSClassUnloadingEnabled,MaxPermSize=1024M} -jar $dest "$@"
