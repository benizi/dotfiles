#!/bin/zsh
profile=
if [ -n "$0:e" ] ; then profile=$0:e ; fi
args=()
[[ -n "$profile" ]] && args=(-no-remote -P $profile)
#exec aoss /usr/bin/firefox-bin $argv
while [ $# -gt 0 ] ; do
	arg=$1
	shift
	case $arg in
		http*)	args+=(-remote "openURL($arg)") ;;
		*) args+=($arg) ;;
	esac
done
for bin in /usr/bin/firefox /opt/firefox/firefox-bin ; do
	[ ! -x $bin ] && continue
	args=( $bin $args )
	break
done
logfile=~/firefox-launcher.log
echo GOT $0 $argv >> $logfile
echo exec $args >> $logfile
SKIP_ARGB_VISUALS=1 exec $args
