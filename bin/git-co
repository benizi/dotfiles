#!/bin/zsh
unset cloneit
case $# in
  1|2)
    case $1 in
      *:*)
        revlike=${1%%:*}
        rev=$(git rev-list --no-walk $revlike -- 2>/dev/null)
        # [[ -z $rev ]] && echo "[$revlike] not a revision" >&2
        [[ -z $rev ]] && cloneit=true
        ;;
    esac
    ;;
esac
if (( $+cloneit )) ; then
  echo "[$1] looks like a repo, so cloning." >&2
  git clone "$@"
else
  git checkout "$@"
fi
