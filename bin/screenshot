#!/usr/bin/env ruby
filename = IO.popen('dmenu', 'r+') do |io|
  io.puts(Time.now.strftime('%Y-%m-%d-%H%M%S'))
  io.close_write
  io.read.chomp
end
exit if filename.empty?
filename += '.png' unless filename =~ /\.\w+$/
dir = ENV['HOME'].dup
if File.directory?("#{dir}/screenshots")
  dir << '/screenshots'
else
  filename = "screenshots-#{filename}"
end
filename = "#{dir}/#{filename}"
system('import', filename)
